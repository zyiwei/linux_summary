# 电子邮件服务
电子邮件服务由很多部分组成，由多个服务共同完成。
### 基本概念
组件：
MUA 邮件用户代理 
MTA 邮件传输代理
MDA 邮件递送代理
MRA 邮件接收代理

电子邮件架构：
MUA可当作客户端（用户直接接触），要连接到邮件服务器上，MUA接受邮件使用IMAP或POP3协议从服务器上获取邮件。IMAP优势在于客户端所有操作斗鱼邮件服务器同步，POP3优势在于所有操作都在本地，不影响服务器上保存的邮件。IMAP用户体验更好。

MTA可当作邮件服务器，所有MTA都是对SMTP协议的一种实现，MUA通过SMTP协议相互发送邮件。

MDA完成服务器对于邮件的保存，即将接受到的邮件写入硬盘中，与MTA紧密结合的。
邮件默认保存目录：
/var/spool/mail/usrename
MDA还对邮件进行垃圾邮件处理及病毒扫描。
常用的MDA:procmail,maildrop

MRA提供IMAP、POP3服务，用户可以真正接触到，用户发邮件时通过SMTP协议直接与MTA通信，接受邮件时通过IMAP/POP3协议与MRA通信
常用MRA:Dovecot

为了安全，邮件系统会使用数字证书对传输协议进行加密：IMAP3S,POP3S

### 电子邮件格式
用户名 @ 邮件服务器主机名/域名
对于以域名做结尾的邮件地址，并不知道该域的邮件服务器，所以必须对该域进行DNS查询，查询该域的MX记录，找出该域的邮件服务器后，才能够发送邮件